from fastapi.testclient import TestClient
from main import app, get_db
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker
from database import Base
from models import Library
import pytest
import os
import uuid

@pytest.fixture(autouse=True)
def set_testing_flag():
    os.environ['TESTING'] = 'True'

@pytest.fixture(scope="module")
def setup_db():
    Base.metadata.create_all(bind=engine)
    yield
    Base.metadata.drop_all(bind=engine)

@pytest.fixture()
def client():
    return TestClient(app)

def test_create_library(client):

    library_data = {
    "name": "Library 7",
    "documents": [
        {
        "name": "Document 6",
        "chunks": [
            {
            "text": "Smart cities use IoT to enhance public services.",
            "embedding": [
                -0.030944824,
                0.018341064,
                -0.018356323,
                0.052001953,
                -0.023605347,
                0.026062012,
                -0.11218262,
                -0.07019043,
                0.005847931,
                -0.058898926,
                -0.03604126,
                0.06536865,
                -0.017501831,
                -0.030853271,
                0.0256958,
                -0.06097412,
                -0.042175293,
                -0.01940918,
                0.04827881,
                -0.050628662,
                -0.038513184,
                -0.09539795,
                0.061309814,
                0.013298035,
                0.04345703,
                0.06738281,
                -0.024017334,
                0.02784729,
                0.0058403015,
                0.027877808,
                -0.040130615,
                -0.029724121,
                0.047027588,
                -0.010116577,
                0.018112183,
                0.14379883,
                -0.019760132,
                -0.04510498,
                0.04034424,
                -0.023742676,
                -0.03616333,
                -0.01928711,
                -0.01727295,
                -0.033599854,
                -0.060516357,
                -0.0070114136,
                0.03466797,
                -0.04724121,
                -0.053955078,
                0.052124023,
                -0.055603027,
                -0.070495605,
                -0.024414062,
                0.042144775,
                0.01322937,
                0.002658844,
                -0.00881958,
                -0.010871887,
                -0.053955078,
                -0.008544922,
                -0.01890564,
                -0.0037002563,
                0.026489258,
                0.029434204,
                0.068237305,
                -0.03201294,
                -0.05126953,
                -0.010498047,
                -0.06347656,
                -0.026397705,
                -0.03552246,
                -0.04788208,
                0.0051651,
                -0.01512146,
                0.12414551,
                -0.034423828,
                -0.0793457,
                0.039886475,
                0.008529663,
                -0.037353516,
                0.030593872,
                0.04660034,
                -0.00093889236,
                0.016723633,
                -0.02166748,
                0.07757568,
                -0.124816895,
                0.037506104,
                0.045562744,
                0.0007328987,
                -0.10449219,
                -0.030792236,
                0.024841309,
                -0.044921875,
                -0.06976318,
                0.00020897388,
                0.09136963,
                0.027069092,
                -0.0034923553,
                0.038269043,
                -0.036865234,
                -0.07220459,
                0.02659607,
                -0.1282959,
                -0.023910522,
                -0.03213501,
                -0.0076522827,
                -0.06604004,
                0.06121826,
                0.015014648,
                -0.0513916,
                0.0018062592,
                -0.08013916,
                -0.0014562607,
                -0.0067367554,
                -0.08227539,
                -0.0579834,
                0.035247803,
                -0.035064697,
                0.007408142,
                -0.031433105,
                0.07879639,
                0.031585693,
                -0.034942627,
                0.022781372,
                0.004966736,
                0.03781128,
                0.08258057,
                -0.028793335,
                0.04736328,
                0.03277588,
                0.06124878,
                0.12432861,
                0.032562256,
                0.057617188,
                0.015686035,
                0.003271103,
                -0.095458984,
                0.00945282,
                0.055114746,
                0.05038452,
                0.118774414,
                0.028259277,
                -0.034820557,
                0.030944824,
                0.030944824,
                0.009429932,
                -0.03515625,
                -0.044433594,
                -0.050231934,
                -0.02406311,
                0.04525757,
                0.049224854,
                0.020614624,
                0.11480713,
                -0.09375,
                0.023223877,
                -0.09051514,
                -0.047332764,
                0.08459473,
                -0.008255005,
                0.0066719055,
                -0.05130005,
                0.027069092,
                -0.0038528442,
                -0.10498047,
                0.084228516,
                0.087768555,
                0.022384644,
                0.068847656,
                -0.008216858,
                -0.049560547,
                0.10656738,
                -0.06573486,
                0.14672852,
                0.0680542,
                -0.04800415,
                0.0814209,
                -0.0071525574,
                0.007949829,
                0.038757324,
                0.03375244,
                0.010116577,
                -0.024932861,
                0.028121948,
                0.072631836,
                0.030563354,
                -0.016815186,
                0.022857666,
                -6.0498714e-05,
                -0.0026512146,
                0.099121094,
                0.10595703,
                0.08843994,
                0.04373169,
                -0.026931763,
                0.068725586,
                -0.054901123,
                -0.02267456,
                0.017654419,
                -0.05795288,
                0.026916504,
                -0.01826477,
                -0.1237793,
                -0.013694763,
                -0.033447266,
                -0.016998291,
                0.0056381226,
                -0.014457703,
                0.0071144104,
                -0.03451538,
                -0.0134887695,
                0.051513672,
                0.028213501,
                0.004878998,
                -0.107543945,
                -0.019073486,
                0.07269287,
                0.057006836,
                -0.031280518,
                0.074279785,
                0.09802246,
                0.0881958,
                -0.08496094,
                0.08459473,
                -0.067871094,
                0.037719727,
                0.08465576,
                0.06112671,
                -0.029724121,
                0.019943237,
                -0.042297363,
                0.0074043274,
                0.07849121,
                0.037353516,
                -0.050994873,
                -0.004524231,
                -0.07897949,
                -0.044067383,
                0.05166626,
                -0.020553589,
                -0.13342285,
                0.056427002,
                0.03250122,
                -0.028671265,
                0.08135986,
                0.04034424,
                0.02986145,
                -0.045562744,
                0.018829346,
                -0.014457703,
                -0.037078857,
                -0.05126953,
                0.06561279,
                0.021438599,
                0.027297974,
                -0.109802246,
                0.00705719,
                0.03253174,
                0.027267456,
                0.0039901733,
                -0.033721924,
                0.0014944077,
                -0.017288208,
                0.026748657,
                -0.039215088,
                -0.087768555,
                -0.0051574707,
                -0.04144287,
                -0.0032234192,
                -0.087768555,
                -0.012748718,
                0.0032424927,
                0.029037476,
                0.039611816,
                0.07287598,
                -0.03338623,
                -0.10626221,
                0.0115737915,
                0.04006958,
                0.0059013367,
                -0.02709961,
                -0.02319336,
                0.053619385,
                0.021728516,
                -0.05709839,
                0.083618164,
                0.077941895,
                -0.0048599243,
                -0.0446167,
                0.0061683655,
                0.050842285,
                -0.010795593,
                0.04650879,
                0.016220093,
                0.036224365,
                0.0423584,
                0.0014295578,
                -0.027297974,
                -0.058563232,
                0.03955078,
                -0.10357666,
                -0.012130737,
                -0.00945282,
                0.06726074,
                -0.013999939,
                0.107299805,
                -0.03829956,
                -0.003446579,
                0.018875122,
                -0.049072266,
                0.020248413,
                -0.036071777,
                -0.05178833,
                -0.07299805,
                -0.028503418,
                -0.06488037,
                0.035491943,
                0.030654907,
                -0.030136108,
                -0.01222229,
                0.041412354,
                -0.036346436,
                -0.021469116,
                0.013702393,
                0.0115737915,
                0.057281494,
                0.049194336,
                -0.0033435822,
                0.007385254,
                -0.03225708,
                -0.043121338,
                -0.01826477,
                0.09625244,
                0.13098145,
                0.015541077,
                -0.018447876,
                -0.078063965,
                -0.044036865,
                -0.08087158,
                0.061828613,
                -0.009223938,
                -0.057403564,
                0.057159424,
                -0.0040512085,
                -0.059570312,
                -0.020889282,
                0.08929443,
                -0.027267456,
                -0.049346924,
                -0.06817627,
                -0.008758545,
                0.013038635,
                0.03060913,
                -0.036071777,
                -0.029922485,
                0.03152466,
                0.04888916,
                -0.032104492,
                0.02911377,
                -0.016723633,
                0.02558899,
                -0.059387207,
                0.0440979,
                -0.019897461,
                -0.050933838,
                0.04864502,
                0.018493652,
                -0.020446777,
                -0.027404785,
                -0.087524414,
                -0.016448975,
                -0.030960083,
                -0.024658203,
                0.0051879883,
                0.054779053,
                0.004470825,
                -0.06768799,
                -0.027450562,
                0.011550903,
                -0.034362793,
                -0.049224854,
                0.007511139,
                0.020507812
            ],
            "metadata_config": {
                "metadata_info": "Metadata for chunk 1 in Document 6"
            }
            },
            {
            "text": "Healthcare data analytics is helping doctors make informed decisions.",
            "embedding": [
                0.014045715,
                -0.00036764145,
                -0.097473145,
                -0.023117065,
                0.019973755,
                -0.054748535,
                -0.022491455,
                0.035736084,
                0.023330688,
                -0.009292603,
                0.0064086914,
                0.020217896,
                0.09790039,
                -0.021591187,
                0.010139465,
                -0.029785156,
                -0.04171753,
                -0.09753418,
                0.024719238,
                -0.06488037,
                0.01852417,
                -0.062316895,
                -0.02281189,
                -0.0063171387,
                0.0063819885,
                0.01838684,
                0.005420685,
                0.016952515,
                -0.02645874,
                0.015899658,
                0.022323608,
                -0.07720947,
                0.0021400452,
                0.058532715,
                -0.018737793,
                0.061553955,
                -0.03201294,
                -0.0016469955,
                -0.0027828217,
                -0.13952637,
                -0.018493652,
                -0.046417236,
                0.056518555,
                -0.030731201,
                0.08972168,
                0.02166748,
                0.03652954,
                0.015464783,
                0.001335144,
                0.055145264,
                0.02909851,
                -0.06512451,
                -0.030776978,
                -0.03668213,
                0.04727173,
                0.055114746,
                -0.030471802,
                0.012794495,
                -0.0013074875,
                -0.055877686,
                0.08026123,
                0.052093506,
                0.07104492,
                0.04269409,
                0.07348633,
                0.023895264,
                0.09680176,
                -0.00920105,
                -0.023727417,
                -0.030426025,
                0.059265137,
                -0.023254395,
                -0.032592773,
                -0.02748108,
                0.08807373,
                -0.008026123,
                -0.083740234,
                0.0043029785,
                0.04006958,
                0.026901245,
                0.038269043,
                -0.009117126,
                0.009246826,
                -0.048339844,
                0.0018911362,
                0.14807129,
                -0.0077056885,
                0.0065689087,
                0.018417358,
                -0.086120605,
                -0.044830322,
                0.011665344,
                0.025436401,
                -0.022583008,
                -0.026351929,
                -0.023269653,
                -0.022262573,
                -0.05065918,
                0.02305603,
                0.017868042,
                0.07543945,
                -0.00082588196,
                0.012527466,
                -0.13427734,
                0.0041046143,
                -0.04385376,
                -0.047058105,
                0.013175964,
                0.13952637,
                -0.103515625,
                -0.021987915,
                0.0107040405,
                0.06506348,
                -0.007972717,
                -0.039978027,
                0.03173828,
                -0.068725586,
                -0.04824829,
                0.05630493,
                0.018432617,
                -0.024749756,
                0.02230835,
                -0.0025615692,
                -0.05682373,
                -0.06112671,
                0.035736084,
                0.034729004,
                0.04824829,
                -0.08416748,
                0.092285156,
                0.1048584,
                0.001953125,
                -0.07446289,
                0.05996704,
                -0.0021362305,
                -0.033966064,
                -0.12072754,
                0.03479004,
                -0.03768921,
                0.044433594,
                0.005050659,
                0.11004639,
                0.022262573,
                -0.124572754,
                -0.02532959,
                0.025512695,
                0.054656982,
                -0.0107421875,
                0.0041770935,
                -0.053588867,
                -0.022338867,
                0.04031372,
                0.02998352,
                -0.09124756,
                0.009712219,
                0.010147095,
                0.08557129,
                0.0035076141,
                -0.048217773,
                0.05517578,
                -0.060272217,
                0.05218506,
                -0.00491333,
                0.08270264,
                0.07672119,
                -0.118652344,
                0.00010710955,
                0.0010213852,
                -0.06524658,
                0.0032291412,
                -0.045288086,
                0.008895874,
                0.015449524,
                -0.028503418,
                -0.024887085,
                0.021331787,
                -0.10797119,
                -0.022491455,
                -0.045196533,
                -0.026260376,
                0.00086164474,
                0.023330688,
                -0.035583496,
                -0.052612305,
                0.030090332,
                0.03427124,
                -0.083984375,
                -0.0018148422,
                -0.045288086,
                -0.02708435,
                0.035064697,
                0.15075684,
                -0.092041016,
                0.008049011,
                0.09350586,
                0.036987305,
                0.043395996,
                0.060638428,
                -0.07598877,
                0.08886719,
                -0.015129089,
                -0.008766174,
                -0.008934021,
                -0.019256592,
                -0.037841797,
                -0.027328491,
                -0.029953003,
                0.056518555,
                -0.075927734,
                -0.06335449,
                -0.004085541,
                0.113098145,
                0.03918457,
                0.059783936,
                -0.030349731,
                0.0066947937,
                -0.014083862,
                0.012710571,
                -0.024414062,
                -0.041625977,
                0.02041626,
                0.0881958,
                -0.07116699,
                -0.052520752,
                -0.045562744,
                -0.013938904,
                0.010536194,
                0.016830444,
                -0.0107421875,
                -0.016235352,
                -0.08319092,
                0.027313232,
                0.046966553,
                -0.008460999,
                0.05014038,
                0.05432129,
                0.02154541,
                0.015213013,
                -0.0440979,
                -0.012390137,
                -0.014198303,
                0.03390503,
                0.03302002,
                -0.040283203,
                0.023117065,
                -0.0047454834,
                -0.027893066,
                0.03994751,
                0.041870117,
                -0.05368042,
                -0.12927246,
                -0.04977417,
                0.09411621,
                -0.04244995,
                0.035858154,
                0.044677734,
                -0.020874023,
                0.0970459,
                -0.046203613,
                0.014778137,
                0.05682373,
                -0.055603027,
                -0.06402588,
                0.0066986084,
                -0.007911682,
                -0.007965088,
                -0.057556152,
                0.014251709,
                0.02973938,
                0.052734375,
                -0.049072266,
                0.06060791,
                0.13928223,
                -0.08807373,
                0.12548828,
                0.0029678345,
                0.011604309,
                -0.031799316,
                -0.07336426,
                0.058807373,
                0.021865845,
                0.025161743,
                0.0026512146,
                0.023040771,
                -0.011764526,
                -0.0016489029,
                -0.0021915436,
                0.10882568,
                0.039123535,
                0.034210205,
                -0.039733887,
                -0.0045661926,
                -0.109191895,
                0.021347046,
                -0.0030326843,
                -0.072631836,
                -0.0064430237,
                0.0513916,
                -0.026275635,
                0.023361206,
                -0.05596924,
                -0.039001465,
                0.012626648,
                -0.09857178,
                0.048309326,
                0.008476257,
                0.0040893555,
                -0.017791748,
                -0.02909851,
                0.00919342,
                -0.042999268,
                -0.01448822,
                -0.027145386,
                -0.12188721,
                -0.020584106,
                -0.040222168,
                -0.066101074,
                0.0206604,
                -0.04107666,
                0.004322052,
                -0.0181427,
                -0.079589844,
                -0.09729004,
                0.078186035,
                0.0146865845,
                0.06604004,
                0.055389404,
                0.009773254,
                0.0077323914,
                -0.10736084,
                0.022598267,
                0.014015198,
                -0.035369873,
                0.019104004,
                0.011375427,
                0.003955841,
                0.037261963,
                -0.05368042,
                0.025527954,
                0.042144775,
                0.046661377,
                0.01322937,
                -0.004085541,
                0.061676025,
                0.03878784,
                -0.08026123,
                -0.042663574,
                0.09460449,
                0.058898926,
                0.05429077,
                -0.014122009,
                0.020126343,
                0.013191223,
                -0.018951416,
                -0.025665283,
                -0.05493164,
                0.028045654,
                -0.053955078,
                -0.039276123,
                0.0037899017,
                -0.015571594,
                0.037261963,
                0.030776978,
                0.03164673,
                -0.053710938,
                0.0020771027,
                -0.030456543,
                0.030792236,
                0.0007238388,
                -0.02166748,
                -0.04067993,
                -0.021087646,
                0.107543945,
                0.012359619,
                0.03274536,
                -0.0050811768,
                -0.03945923,
                0.047698975,
                -0.0007724762,
                0.10235596,
                0.021469116,
                -0.078430176,
                0.10101318,
                -0.014183044
            ],
            "metadata_config": {
                "metadata_info": "Metadata for chunk 2 in Document 6"
            }
            }
                ],
                "metadata_config": {
                    "metadata_info": "Metadata for Document 6"
                }
                }
            ],
            "metadata_config": {
                "metadata_info": "Metadata for Library 6"
            }
            }
    response = client.post("/libraries/", json=library_data)
    response_data = response.json()
    
    assert "id" in response_data
    assert response_data["name"] == "Library 7"
    assert "documents" in response_data


def test_get_library(client):
    library_id = "PASTE_LIBRARY_ID_HERE"
    response = client.get(f"/libraries/{library_id}")
    assert response.status_code == 200
    assert response.json()["id"] == library_id

def test_get_libraries(client):
    response = client.get(f"/libraries/")
    assert response.status_code == 200
    libraries = response.json()
    print(f"Libraries returned: {len(libraries)}")
    print(f"First library: {libraries[0] if libraries else 'No libraries'}")
    assert isinstance(libraries, list), "Response should be a list of libraries"

# def test_update_library(client):
#     library_id = uuid.UUID("d21188dd-7779-4f48-9bd7-32952d117dc1")
#     library_data = {
#   "id": library_id,
#   "name": "Library 7",
#   "documents": [
#     {
#       "id": "f9ca809c-a5fc-4781-8389-4bc9a8e382a0",
#       "chunks": [
#         {
#           "id": "d33505ab-b31d-47b6-be1c-63f831ae6d2b",
#           "text": "Smart cities use IoT to enhance public services.",
#             "embedding": [
#                 -0.030944824,
#                 0.018341064,
#                 -0.018356323,
#                 0.052001953,
#                 -0.023605347,
#                 0.026062012,
#                 -0.11218262,
#                 -0.07019043,
#                 0.005847931,
#                 -0.058898926,
#                 -0.03604126,
#                 0.06536865,
#                 -0.017501831,
#                 -0.030853271,
#                 0.0256958,
#                 -0.06097412,
#                 -0.042175293,
#                 -0.01940918,
#                 0.04827881,
#                 -0.050628662,
#                 -0.038513184,
#                 -0.09539795,
#                 0.061309814,
#                 0.013298035,
#                 0.04345703,
#                 0.06738281,
#                 -0.024017334,
#                 0.02784729,
#                 0.0058403015,
#                 0.027877808,
#                 -0.040130615,
#                 -0.029724121,
#                 0.047027588,
#                 -0.010116577,
#                 0.018112183,
#                 0.14379883,
#                 -0.019760132,
#                 -0.04510498,
#                 0.04034424,
#                 -0.023742676,
#                 -0.03616333,
#                 -0.01928711,
#                 -0.01727295,
#                 -0.033599854,
#                 -0.060516357,
#                 -0.0070114136,
#                 0.03466797,
#                 -0.04724121,
#                 -0.053955078,
#                 0.052124023,
#                 -0.055603027,
#                 -0.070495605,
#                 -0.024414062,
#                 0.042144775,
#                 0.01322937,
#                 0.002658844,
#                 -0.00881958,
#                 -0.010871887,
#                 -0.053955078,
#                 -0.008544922,
#                 -0.01890564,
#                 -0.0037002563,
#                 0.026489258,
#                 0.029434204,
#                 0.068237305,
#                 -0.03201294,
#                 -0.05126953,
#                 -0.010498047,
#                 -0.06347656,
#                 -0.026397705,
#                 -0.03552246,
#                 -0.04788208,
#                 0.0051651,
#                 -0.01512146,
#                 0.12414551,
#                 -0.034423828,
#                 -0.0793457,
#                 0.039886475,
#                 0.008529663,
#                 -0.037353516,
#                 0.030593872,
#                 0.04660034,
#                 -0.00093889236,
#                 0.016723633,
#                 -0.02166748,
#                 0.07757568,
#                 -0.124816895,
#                 0.037506104,
#                 0.045562744,
#                 0.0007328987,
#                 -0.10449219,
#                 -0.030792236,
#                 0.024841309,
#                 -0.044921875,
#                 -0.06976318,
#                 0.00020897388,
#                 0.09136963,
#                 0.027069092,
#                 -0.0034923553,
#                 0.038269043,
#                 -0.036865234,
#                 -0.07220459,
#                 0.02659607,
#                 -0.1282959,
#                 -0.023910522,
#                 -0.03213501,
#                 -0.0076522827,
#                 -0.06604004,
#                 0.06121826,
#                 0.015014648,
#                 -0.0513916,
#                 0.0018062592,
#                 -0.08013916,
#                 -0.0014562607,
#                 -0.0067367554,
#                 -0.08227539,
#                 -0.0579834,
#                 0.035247803,
#                 -0.035064697,
#                 0.007408142,
#                 -0.031433105,
#                 0.07879639,
#                 0.031585693,
#                 -0.034942627,
#                 0.022781372,
#                 0.004966736,
#                 0.03781128,
#                 0.08258057,
#                 -0.028793335,
#                 0.04736328,
#                 0.03277588,
#                 0.06124878,
#                 0.12432861,
#                 0.032562256,
#                 0.057617188,
#                 0.015686035,
#                 0.003271103,
#                 -0.095458984,
#                 0.00945282,
#                 0.055114746,
#                 0.05038452,
#                 0.118774414,
#                 0.028259277,
#                 -0.034820557,
#                 0.030944824,
#                 0.030944824,
#                 0.009429932,
#                 -0.03515625,
#                 -0.044433594,
#                 -0.050231934,
#                 -0.02406311,
#                 0.04525757,
#                 0.049224854,
#                 0.020614624,
#                 0.11480713,
#                 -0.09375,
#                 0.023223877,
#                 -0.09051514,
#                 -0.047332764,
#                 0.08459473,
#                 -0.008255005,
#                 0.0066719055,
#                 -0.05130005,
#                 0.027069092,
#                 -0.0038528442,
#                 -0.10498047,
#                 0.084228516,
#                 0.087768555,
#                 0.022384644,
#                 0.068847656,
#                 -0.008216858,
#                 -0.049560547,
#                 0.10656738,
#                 -0.06573486,
#                 0.14672852,
#                 0.0680542,
#                 -0.04800415,
#                 0.0814209,
#                 -0.0071525574,
#                 0.007949829,
#                 0.038757324,
#                 0.03375244,
#                 0.010116577,
#                 -0.024932861,
#                 0.028121948,
#                 0.072631836,
#                 0.030563354,
#                 -0.016815186,
#                 0.022857666,
#                 -6.0498714e-05,
#                 -0.0026512146,
#                 0.099121094,
#                 0.10595703,
#                 0.08843994,
#                 0.04373169,
#                 -0.026931763,
#                 0.068725586,
#                 -0.054901123,
#                 -0.02267456,
#                 0.017654419,
#                 -0.05795288,
#                 0.026916504,
#                 -0.01826477,
#                 -0.1237793,
#                 -0.013694763,
#                 -0.033447266,
#                 -0.016998291,
#                 0.0056381226,
#                 -0.014457703,
#                 0.0071144104,
#                 -0.03451538,
#                 -0.0134887695,
#                 0.051513672,
#                 0.028213501,
#                 0.004878998,
#                 -0.107543945,
#                 -0.019073486,
#                 0.07269287,
#                 0.057006836,
#                 -0.031280518,
#                 0.074279785,
#                 0.09802246,
#                 0.0881958,
#                 -0.08496094,
#                 0.08459473,
#                 -0.067871094,
#                 0.037719727,
#                 0.08465576,
#                 0.06112671,
#                 -0.029724121,
#                 0.019943237,
#                 -0.042297363,
#                 0.0074043274,
#                 0.07849121,
#                 0.037353516,
#                 -0.050994873,
#                 -0.004524231,
#                 -0.07897949,
#                 -0.044067383,
#                 0.05166626,
#                 -0.020553589,
#                 -0.13342285,
#                 0.056427002,
#                 0.03250122,
#                 -0.028671265,
#                 0.08135986,
#                 0.04034424,
#                 0.02986145,
#                 -0.045562744,
#                 0.018829346,
#                 -0.014457703,
#                 -0.037078857,
#                 -0.05126953,
#                 0.06561279,
#                 0.021438599,
#                 0.027297974,
#                 -0.109802246,
#                 0.00705719,
#                 0.03253174,
#                 0.027267456,
#                 0.0039901733,
#                 -0.033721924,
#                 0.0014944077,
#                 -0.017288208,
#                 0.026748657,
#                 -0.039215088,
#                 -0.087768555,
#                 -0.0051574707,
#                 -0.04144287,
#                 -0.0032234192,
#                 -0.087768555,
#                 -0.012748718,
#                 0.0032424927,
#                 0.029037476,
#                 0.039611816,
#                 0.07287598,
#                 -0.03338623,
#                 -0.10626221,
#                 0.0115737915,
#                 0.04006958,
#                 0.0059013367,
#                 -0.02709961,
#                 -0.02319336,
#                 0.053619385,
#                 0.021728516,
#                 -0.05709839,
#                 0.083618164,
#                 0.077941895,
#                 -0.0048599243,
#                 -0.0446167,
#                 0.0061683655,
#                 0.050842285,
#                 -0.010795593,
#                 0.04650879,
#                 0.016220093,
#                 0.036224365,
#                 0.0423584,
#                 0.0014295578,
#                 -0.027297974,
#                 -0.058563232,
#                 0.03955078,
#                 -0.10357666,
#                 -0.012130737,
#                 -0.00945282,
#                 0.06726074,
#                 -0.013999939,
#                 0.107299805,
#                 -0.03829956,
#                 -0.003446579,
#                 0.018875122,
#                 -0.049072266,
#                 0.020248413,
#                 -0.036071777,
#                 -0.05178833,
#                 -0.07299805,
#                 -0.028503418,
#                 -0.06488037,
#                 0.035491943,
#                 0.030654907,
#                 -0.030136108,
#                 -0.01222229,
#                 0.041412354,
#                 -0.036346436,
#                 -0.021469116,
#                 0.013702393,
#                 0.0115737915,
#                 0.057281494,
#                 0.049194336,
#                 -0.0033435822,
#                 0.007385254,
#                 -0.03225708,
#                 -0.043121338,
#                 -0.01826477,
#                 0.09625244,
#                 0.13098145,
#                 0.015541077,
#                 -0.018447876,
#                 -0.078063965,
#                 -0.044036865,
#                 -0.08087158,
#                 0.061828613,
#                 -0.009223938,
#                 -0.057403564,
#                 0.057159424,
#                 -0.0040512085,
#                 -0.059570312,
#                 -0.020889282,
#                 0.08929443,
#                 -0.027267456,
#                 -0.049346924,
#                 -0.06817627,
#                 -0.008758545,
#                 0.013038635,
#                 0.03060913,
#                 -0.036071777,
#                 -0.029922485,
#                 0.03152466,
#                 0.04888916,
#                 -0.032104492,
#                 0.02911377,
#                 -0.016723633,
#                 0.02558899,
#                 -0.059387207,
#                 0.0440979,
#                 -0.019897461,
#                 -0.050933838,
#                 0.04864502,
#                 0.018493652,
#                 -0.020446777,
#                 -0.027404785,
#                 -0.087524414,
#                 -0.016448975,
#                 -0.030960083,
#                 -0.024658203,
#                 0.0051879883,
#                 0.054779053,
#                 0.004470825,
#                 -0.06768799,
#                 -0.027450562,
#                 0.011550903,
#                 -0.034362793,
#                 -0.049224854,
#                 0.007511139,
#                 0.020507812
#             ],
#             "metadata_config": {
#                 "metadata_info": "Metadata for chunk 1 in Document 7"
#             },
#           "document_id": "f9ca809c-a5fc-4781-8389-4bc9a8e382a0"
#             },
#             {
#             "id": "d972287b-8433-4082-8373-cbdf2614d641",
#             "text": "Healthcare data analytics is helping doctors make informed decisions.",
#             "embedding": [
#                 0.014045715,
#                 -0.00036764145,
#                 -0.097473145,
#                 -0.023117065,
#                 0.019973755,
#                 -0.054748535,
#                 -0.022491455,
#                 0.035736084,
#                 0.023330688,
#                 -0.009292603,
#                 0.0064086914,
#                 0.020217896,
#                 0.09790039,
#                 -0.021591187,
#                 0.010139465,
#                 -0.029785156,
#                 -0.04171753,
#                 -0.09753418,
#                 0.024719238,
#                 -0.06488037,
#                 0.01852417,
#                 -0.062316895,
#                 -0.02281189,
#                 -0.0063171387,
#                 0.0063819885,
#                 0.01838684,
#                 0.005420685,
#                 0.016952515,
#                 -0.02645874,
#                 0.015899658,
#                 0.022323608,
#                 -0.07720947,
#                 0.0021400452,
#                 0.058532715,
#                 -0.018737793,
#                 0.061553955,
#                 -0.03201294,
#                 -0.0016469955,
#                 -0.0027828217,
#                 -0.13952637,
#                 -0.018493652,
#                 -0.046417236,
#                 0.056518555,
#                 -0.030731201,
#                 0.08972168,
#                 0.02166748,
#                 0.03652954,
#                 0.015464783,
#                 0.001335144,
#                 0.055145264,
#                 0.02909851,
#                 -0.06512451,
#                 -0.030776978,
#                 -0.03668213,
#                 0.04727173,
#                 0.055114746,
#                 -0.030471802,
#                 0.012794495,
#                 -0.0013074875,
#                 -0.055877686,
#                 0.08026123,
#                 0.052093506,
#                 0.07104492,
#                 0.04269409,
#                 0.07348633,
#                 0.023895264,
#                 0.09680176,
#                 -0.00920105,
#                 -0.023727417,
#                 -0.030426025,
#                 0.059265137,
#                 -0.023254395,
#                 -0.032592773,
#                 -0.02748108,
#                 0.08807373,
#                 -0.008026123,
#                 -0.083740234,
#                 0.0043029785,
#                 0.04006958,
#                 0.026901245,
#                 0.038269043,
#                 -0.009117126,
#                 0.009246826,
#                 -0.048339844,
#                 0.0018911362,
#                 0.14807129,
#                 -0.0077056885,
#                 0.0065689087,
#                 0.018417358,
#                 -0.086120605,
#                 -0.044830322,
#                 0.011665344,
#                 0.025436401,
#                 -0.022583008,
#                 -0.026351929,
#                 -0.023269653,
#                 -0.022262573,
#                 -0.05065918,
#                 0.02305603,
#                 0.017868042,
#                 0.07543945,
#                 -0.00082588196,
#                 0.012527466,
#                 -0.13427734,
#                 0.0041046143,
#                 -0.04385376,
#                 -0.047058105,
#                 0.013175964,
#                 0.13952637,
#                 -0.103515625,
#                 -0.021987915,
#                 0.0107040405,
#                 0.06506348,
#                 -0.007972717,
#                 -0.039978027,
#                 0.03173828,
#                 -0.068725586,
#                 -0.04824829,
#                 0.05630493,
#                 0.018432617,
#                 -0.024749756,
#                 0.02230835,
#                 -0.0025615692,
#                 -0.05682373,
#                 -0.06112671,
#                 0.035736084,
#                 0.034729004,
#                 0.04824829,
#                 -0.08416748,
#                 0.092285156,
#                 0.1048584,
#                 0.001953125,
#                 -0.07446289,
#                 0.05996704,
#                 -0.0021362305,
#                 -0.033966064,
#                 -0.12072754,
#                 0.03479004,
#                 -0.03768921,
#                 0.044433594,
#                 0.005050659,
#                 0.11004639,
#                 0.022262573,
#                 -0.124572754,
#                 -0.02532959,
#                 0.025512695,
#                 0.054656982,
#                 -0.0107421875,
#                 0.0041770935,
#                 -0.053588867,
#                 -0.022338867,
#                 0.04031372,
#                 0.02998352,
#                 -0.09124756,
#                 0.009712219,
#                 0.010147095,
#                 0.08557129,
#                 0.0035076141,
#                 -0.048217773,
#                 0.05517578,
#                 -0.060272217,
#                 0.05218506,
#                 -0.00491333,
#                 0.08270264,
#                 0.07672119,
#                 -0.118652344,
#                 0.00010710955,
#                 0.0010213852,
#                 -0.06524658,
#                 0.0032291412,
#                 -0.045288086,
#                 0.008895874,
#                 0.015449524,
#                 -0.028503418,
#                 -0.024887085,
#                 0.021331787,
#                 -0.10797119,
#                 -0.022491455,
#                 -0.045196533,
#                 -0.026260376,
#                 0.00086164474,
#                 0.023330688,
#                 -0.035583496,
#                 -0.052612305,
#                 0.030090332,
#                 0.03427124,
#                 -0.083984375,
#                 -0.0018148422,
#                 -0.045288086,
#                 -0.02708435,
#                 0.035064697,
#                 0.15075684,
#                 -0.092041016,
#                 0.008049011,
#                 0.09350586,
#                 0.036987305,
#                 0.043395996,
#                 0.060638428,
#                 -0.07598877,
#                 0.08886719,
#                 -0.015129089,
#                 -0.008766174,
#                 -0.008934021,
#                 -0.019256592,
#                 -0.037841797,
#                 -0.027328491,
#                 -0.029953003,
#                 0.056518555,
#                 -0.075927734,
#                 -0.06335449,
#                 -0.004085541,
#                 0.113098145,
#                 0.03918457,
#                 0.059783936,
#                 -0.030349731,
#                 0.0066947937,
#                 -0.014083862,
#                 0.012710571,
#                 -0.024414062,
#                 -0.041625977,
#                 0.02041626,
#                 0.0881958,
#                 -0.07116699,
#                 -0.052520752,
#                 -0.045562744,
#                 -0.013938904,
#                 0.010536194,
#                 0.016830444,
#                 -0.0107421875,
#                 -0.016235352,
#                 -0.08319092,
#                 0.027313232,
#                 0.046966553,
#                 -0.008460999,
#                 0.05014038,
#                 0.05432129,
#                 0.02154541,
#                 0.015213013,
#                 -0.0440979,
#                 -0.012390137,
#                 -0.014198303,
#                 0.03390503,
#                 0.03302002,
#                 -0.040283203,
#                 0.023117065,
#                 -0.0047454834,
#                 -0.027893066,
#                 0.03994751,
#                 0.041870117,
#                 -0.05368042,
#                 -0.12927246,
#                 -0.04977417,
#                 0.09411621,
#                 -0.04244995,
#                 0.035858154,
#                 0.044677734,
#                 -0.020874023,
#                 0.0970459,
#                 -0.046203613,
#                 0.014778137,
#                 0.05682373,
#                 -0.055603027,
#                 -0.06402588,
#                 0.0066986084,
#                 -0.007911682,
#                 -0.007965088,
#                 -0.057556152,
#                 0.014251709,
#                 0.02973938,
#                 0.052734375,
#                 -0.049072266,
#                 0.06060791,
#                 0.13928223,
#                 -0.08807373,
#                 0.12548828,
#                 0.0029678345,
#                 0.011604309,
#                 -0.031799316,
#                 -0.07336426,
#                 0.058807373,
#                 0.021865845,
#                 0.025161743,
#                 0.0026512146,
#                 0.023040771,
#                 -0.011764526,
#                 -0.0016489029,
#                 -0.0021915436,
#                 0.10882568,
#                 0.039123535,
#                 0.034210205,
#                 -0.039733887,
#                 -0.0045661926,
#                 -0.109191895,
#                 0.021347046,
#                 -0.0030326843,
#                 -0.072631836,
#                 -0.0064430237,
#                 0.0513916,
#                 -0.026275635,
#                 0.023361206,
#                 -0.05596924,
#                 -0.039001465,
#                 0.012626648,
#                 -0.09857178,
#                 0.048309326,
#                 0.008476257,
#                 0.0040893555,
#                 -0.017791748,
#                 -0.02909851,
#                 0.00919342,
#                 -0.042999268,
#                 -0.01448822,
#                 -0.027145386,
#                 -0.12188721,
#                 -0.020584106,
#                 -0.040222168,
#                 -0.066101074,
#                 0.0206604,
#                 -0.04107666,
#                 0.004322052,
#                 -0.0181427,
#                 -0.079589844,
#                 -0.09729004,
#                 0.078186035,
#                 0.0146865845,
#                 0.06604004,
#                 0.055389404,
#                 0.009773254,
#                 0.0077323914,
#                 -0.10736084,
#                 0.022598267,
#                 0.014015198,
#                 -0.035369873,
#                 0.019104004,
#                 0.011375427,
#                 0.003955841,
#                 0.037261963,
#                 -0.05368042,
#                 0.025527954,
#                 0.042144775,
#                 0.046661377,
#                 0.01322937,
#                 -0.004085541,
#                 0.061676025,
#                 0.03878784,
#                 -0.08026123,
#                 -0.042663574,
#                 0.09460449,
#                 0.058898926,
#                 0.05429077,
#                 -0.014122009,
#                 0.020126343,
#                 0.013191223,
#                 -0.018951416,
#                 -0.025665283,
#                 -0.05493164,
#                 0.028045654,
#                 -0.053955078,
#                 -0.039276123,
#                 0.0037899017,
#                 -0.015571594,
#                 0.037261963,
#                 0.030776978,
#                 0.03164673,
#                 -0.053710938,
#                 0.0020771027,
#                 -0.030456543,
#                 0.030792236,
#                 0.0007238388,
#                 -0.02166748,
#                 -0.04067993,
#                 -0.021087646,
#                 0.107543945,
#                 0.012359619,
#                 0.03274536,
#                 -0.0050811768,
#                 -0.03945923,
#                 0.047698975,
#                 -0.0007724762,
#                 0.10235596,
#                 0.021469116,
#                 -0.078430176,
#                 0.10101318,
#                 -0.014183044
#             ],
#             "metadata_config": {
#                 "metadata_info": "Metadata for chunk 2 in Document 7"
#             },
#           "document_id": "f9ca809c-a5fc-4781-8389-4bc9a8e382a0"
#             }
#                 ],
#                 "metadata_config": {
#                     "metadata_info": "Metadata for Document 7"
#                 },
#             "library_id": library_id
#                 }
#             ],
#             "metadata_config": {
#                 "metadata_info": "Updated Metadata for Library 6"
#             }
#             }
#     response = client.put("/libraries/{library_id}", json=library_data)
#     response_data = response.json()
#     print(response_data)
#     assert response_data["id"] == library_id
#     assert response_data["name"] == "Updated Library 7"
#     assert "documents" in response_data

def test_delete_library(client):
    library_id = "PASTE_LIBRARY_ID_HERE"
    response = client.delete(f"/libraries/{library_id}")
    assert response.status_code == 200
    assert response.json()["id"] == library_id